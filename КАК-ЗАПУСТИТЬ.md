# Как запустить бэкенд

Если в браузере ошибка **«Сервер недоступен»** и в консоли `ERR_CONNECTION_REFUSED` на `localhost:3001` — бэкенд не запущен.

## 1. Открой терминал

Открой **отдельный** терминал (не тот, где крутится фронт).

## 2. Перейди в папку backend

```bash
cd backend
```

Если ты уже в корне проекта LMS, то просто:

```bash
cd backend
```

## 3. Проверь .env

В папке `backend` должен быть файл **`.env`** (скопируй из `.env.example`, если его нет).

Обязательно задай:

- **DATABASE_URL** — строка подключения к PostgreSQL, например:
  ```env
  DATABASE_URL=postgresql://postgres:пароль@localhost:5432/имя_базы
  ```
- **SECRET_KEY** — любая длинная строка для JWT (например случайный набор символов).

Опционально:

- **PORT** — порт сервера (по умолчанию 3001).
- **FRONT_URL** — URL фронта для CORS (по умолчанию http://localhost:3000).

## 4. Запусти PostgreSQL

Бэкенд подключается к базе при старте. Убедись, что PostgreSQL запущен и база из `DATABASE_URL` существует.

## 5. Запусти бэкенд

**Важно:** команду нужно выполнять **из папки `backend`**. Если ты в корне проекта (LMS), сначала сделай `cd backend`.

```bash
cd backend
pnpm run start:dev
```

Либо из корня проекта одной командой:

```bash
pnpm run start:dev
```
(в корневом `package.json` эта команда зайдёт в `backend` и запустит там `start:dev`).

В консоли должно появиться:
1. `Starting compilation in watch mode...` — компиляция TypeScript.
2. `[Backend] Starting Nest application...` — старт приложения.
3. `[Backend] Server is running: http://localhost:3001` — сервер слушает порт.

Если видишь только пункт 1 и дальше пусто — приложение, скорее всего, зависает при подключении к БД (проверь, что PostgreSQL запущен и `DATABASE_URL` в `.env` верный).

Если появилась красная ошибка `[Backend] Failed to start:` — прочитай сообщение: там будет причина (нет `DATABASE_URL`, нет доступа к базе и т.д.).

После успешного старта нажми «Повторить» в браузере.

## Если бэкенд падает при запуске

- **«DATABASE_URL is required»** — в `.env` нет `DATABASE_URL` или он пустой.
- **Ошибка подключения к БД** — проверь, что PostgreSQL запущен, логин/пароль/хост/порт и имя базы в `DATABASE_URL` верные.
- **Порт 3001 занят** — закрой другое приложение на этом порту или задай в `.env` другой `PORT`.
